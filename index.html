<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container{
            width: 200px;
            height: 200px;
            margin: 200px auto;
            perspective: 800px;
        }
        .box {
            width: 200px;
            height: 200px;
            transform-style: preserve-3d;
            position: relative;
            cursor: pointer;
        }
        
        .child-bottom{
            text-align: center;
            line-height: 200px;
            width: 200px;
            position: absolute;
            height: 200px;
            transform: rotateX(-90deg) translateZ(100px);
            opacity: .7;
            color: white;
            background-color: red;

        }
        .child-left{
            text-align: center;
            line-height: 200px;
            position: absolute;
            width: 200px;
            height: 200px;
            transform: rotateY(-90deg) translateZ(100px);
            color: white;
            opacity: .7;
            background-color: blue;
        }
        .child-right{
            position: absolute;
            text-align: center;
            line-height: 200px;
            width: 200px;
            height: 200px;
            transform: rotateY(90deg) translateZ(100px);
            color: white;
            opacity: .7;
            background-color: yellow;
        }
        .child-top{
            position: absolute;
            text-align: center;
            line-height: 200px;
            width: 200px;
            height: 200px;
            transform: rotateX(90deg) translateZ(100px);
            color: white;
            opacity: .7;
            background-color: gray;
        }
        .child-back{
            position: absolute;
            text-align: center;
            line-height: 200px;
            width: 200px;
            height: 200px;
            transform: rotateY(180deg) translateZ(100px);
            color: white;
            background-color: green;
            opacity: .7;
        }
        .child-font{
            position: absolute;
            text-align: center;
            line-height: 200px;
            width: 200px;
            height: 200px;
            transform: translateZ(100px);
            color: white;
            background-color: green;
            opacity: .7;
        }
    </style>
</head>
<body>
    <div class="container">
            <div class="box" id="box-element">
                <div class="child-bottom">bottom</div>
                <div class="child-left">Left</div>
                <div class="child-right">Right</div>
                <div class="child-top">Top</div>
                <div class="child-back">Back</div>
                <svg class="child-font" width="100" height="100">
                    <path d="M2 2 l100 100 Z" />
                </svg>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    box();
    
    // equilateralTriangle("triangle-bottom");
    // equilateralTriangle("triangle-top");
    // parallelogram("parallelogram-left");
    // parallelogram("parallelogram-right");
    // parallelogram("parallelogram-back");
    // document.getElementById("parallelogram-left").style.transform = `rotateY(-60deg) translateX(${100*Math.sqrt(3)/4}px)`;
    // document.getElementById("parallelogram-right").style.transform = `rotateY(60deg) translateX(${100*Math.sqrt(3)/4}px)`;
    //  document.getElementById("triangle-bottom").style.transform = `rotateX(-80deg) translateZ(${100*Math.sqrt(3)/4}px)`;
    function equilateralTriangle(id){
        var path = document.getElementById(id);
        var sum = (100*Math.sqrt(3))/2;
        path.setAttribute("d",`M0 8 l100 0 l-50 ${sum} Z`);
    }

    function parallelogram(id){
        var path = document.getElementById(id);
        var sum = (100*Math.sqrt(3))/2;
        path.setAttribute("d",`M80 90 l100 0 l0 100 l-100 0 Z`);
    }
    function box() {
        var x = 0;
        var y = 0;
        var degX = 0;
        var degY = 0;
        var pointX=0;
        var pointY=0;
        var box = document.getElementById("box-element");
        box.addEventListener("mousemove",(e)=>{
            if(Math.abs(pointX-e.clientX)> 20 || Math.abs(pointY-e.clientY)> 5){
                pointY = e.clientY;
                pointX = e.clientX;
            }
            else 
                if (pointX < e.clientX){
                    degX += (e.clientX-pointX)*2;
                    box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                    pointX = e.clientX;
                }
                else 
                    if (pointX > e.clientX){
                        degX -= (pointX - e.clientX)*2;
                        box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                        pointX = e.clientX;
                    }
                if (pointY < e.clientY){
                    degY -= (e.clientY-pointY)*2;
                    box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                    pointY = e.clientY;
                }
                else 
                    if (pointY > e.clientY){
                        degY += (pointY - e.clientY)*2;
                        box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                        pointY = e.clientY;
                    }
        });
        box.addEventListener("touchmove",(e)=>{
            if(Math.abs(pointX-e.touches[0].clientX)> 20 || Math.abs(pointY-e.touches[0].clientY)> 5){
                pointY = e.touches[0].clientY;
                pointX = e.touches[0].clientX;
            }
            else 
                if (pointX < e.touches[0].clientX){
                    degX += (e.touches[0].clientX-pointX)*2;
                    box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                    pointX = e.touches[0].clientX;
                }
                else 
                    if (pointX > e.touches[0].clientX){
                        degX -= (pointX - e.touches[0].clientX)*2;
                        box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                        pointX = e.touches[0].clientX;
                    }
                if (pointY < e.touches[0].clientY){
                    degY -= (e.touches[0].clientY-pointY)*2;
                    box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                    pointY = e.touches[0].clientY;
                }
                else 
                    if (pointY > e.touches[0].clientY){
                        degY += (pointY - e.touches[0].clientY)*2;
                        box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
                        pointY = e.touches[0].clientY;
                    }
        });
        box.addEventListener("mouseup",(e)=>{
                pointY = e.clientY;
                pointX = e.clientX;
        });
        
        setInterval(()=>{
            degY = degY+0.5;
            degX = degX+0.2;
            box.style.transform = `rotateX(${degY}deg) rotateY(${degX}deg)`;
        },10);

    }
    /*
        Bước 1:
            Đầu vào: x = 0, y = 0, độ deg X, độ deg Y, độ deg Z
        Bước 2:
            Tạo Event mousemove
            Tạo cờ = 0;
            if cờ = 0
                gắn cờ = e.clientX
            if cờ < e.clientX;
                a = e.lientX - x;
                cờ = e.clientX;
                gắn a vào rotate của box
            if cờ > e.clientX;
                a = cờe.lientX - x);
                cờ = e.clientX;
                gắn a vào rotate của box

        Bước 3:
            Đầu ra: số độ quay rotateX(), rotateY(), rotateZ()

    */
</script>